(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,,,,,,,function(t,e,a){"use strict";e.a={data:function(){return{errorMessages:{required:"Поле <strong></strong> обязательно для заполнения"},errors:[],rules:[],labels:[]}},methods:{generateMessage:function(t,e){if(this.errorMessages.hasOwnProperty(t)){var a=this.labels.hasOwnProperty(e)?this.labels[e]:e;return this.errorMessages[t].replace("<strong></strong>","<strong>".concat(a,"</strong>"))}},sendMessage:function(t,e){var a=this.generateMessage(t,e),i=this.errors.findIndex((function(t){return t===a}));this.$set(this.errors,-1!==i?i:this.errors.length,a)},deleteMessage:function(t,e){var a=this.generateMessage(t,e),i=this.errors.findIndex((function(t){return t===a}));-1!==i&&this.errors.splice(i,1)},validate:function(){var t=this,e=!0,a=function(a){if(t.rules.hasOwnProperty(a)&&t.data.hasOwnProperty(a)){var i=t.data[a];t.rules[a].forEach((function(r){"function"==typeof r&&!1===r(i,t.data,t,a)&&(e=!1),t.ruleHandler.hasOwnProperty(r)&&!1===t.ruleHandler[r](i,t.data,t,a)&&(e=!1)}))}};for(var i in this.rules)a(i);return e}},computed:{ruleHandler:function(){return{required:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(Array.isArray(t)&&!t.length||!t)return a.sendMessage("required",i),!1;t===Object(t)||a.deleteMessage("required",i)},callback:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";console.log(t,e,a,i)}}}}}},,,,function(t,e,a){var i=a(22);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(9)(i,r);i.locals&&(t.exports=i.locals)},,,,,,,,,,function(t,e,a){"use strict";var i=a(11);a.n(i).a},function(t,e,a){(t.exports=a(8)(!1)).push([t.i,".highcharts-figure,\n.highcharts-data-table table {\n  min-width: 310px;\n  max-width: 800px;\n  margin: 1em auto;\n}\n#container {\n  height: 200px;\n}\n.highcharts-data-table table {\n  font-family: Verdana, sans-serif;\n  border-collapse: collapse;\n  border: 1px solid #ebebeb;\n  margin: 10px auto;\n  text-align: center;\n  width: 100%;\n  max-width: 500px;\n}\n.highcharts-data-table caption {\n  font-size: 1.2em;\n  color: #555;\n}\n.highcharts-data-table th {\n  font-weight: 600;\n}\n.highcharts-data-table thead tr,\n.highcharts-data-table tr:nth-child(even) {\n  background: #f8f8f8;\n}\n.highcharts-data-table tr:hover {\n  background: #f1f7ff;\n}",""])},,,,,,,,,,,function(t,e,a){"use strict";a.r(e);var i;function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var n=(r(i={created:function(){},props:{violation:{type:[Array,String],required:!0}},data:function(){return{constant:{},date:null,deviation:null,errors:[],issetDate:!0,official:null,reg:null,skipVotesSummary:!1,time:null,turnout:null}}},"created",(function(){var t=this.$store.getters["Modal/getViolation"],e=t.date_start,a=t.date_end;if(!e&&!a||!e)return this.issetDate=!1;if(e&&!a||e===a)this.date=this.formatDateHelper(e),this.time=this.formatTimeHelper(e);else if(e&&a){var i=this.formatDateHelper(e),r=this.formatDateHelper(a),n=this.formatTimeHelper(e),o=this.formatTimeHelper(a);i===r?(this.date=i,this.time="с ".concat(n," по ").concat(o)):this.date="с ".concat(i," ").concat(n," по ").concat(r," ").concat(o)}var s,c=this.$store.getters["Modal/getConstant"],l=7===this.computedViolationType?this.$store.getters["Modal/getOfficialVotes"]:this.$store.getters["Modal/getIntermediateOfficialVotes"];l&&(this.official=null!==(s=l.ballots_in_ballot_boxes_after_election)&&void 0!==s?s:l.voters_voted_in_ballot_box,this.reg=l.voters_registered,this.turnout=l.voters_turnout,this.deviation=l.deviation,this.skipVotesSummary=l.skip_votes_summary,this.constant=c)})),r(i,"computed",{computedViolationId:function(){return Array.isArray(this.violation)?this.violation.join(", "):this.violation},computedViolationTypeName:function(){return this.$store.getters["Modal/getViolation"].type_name},computedViolationType:function(){return this.$store.getters["Modal/getViolation"].type},computedCoefficient:function(){var t=this.$store.getters["Modal/getViolation"];return"".concat(parseInt(100*t.normalized_width_k),"% (меньше ").concat(100*this.constant.boxes_width_threshold,"%)")},computedDeviation:function(){var t=parseInt(Math.abs(this.deviation)*this.constant.revisor_error),e=parseInt(this.deviation-t),a=parseInt(Math.abs(e)/this.official*100),i=parseInt(this.deviation+t),r=parseInt(Math.abs(i)/this.official*100);return"От ".concat(e," (").concat(a,"%) до ").concat(i," (").concat(r,"%) избирателей")},computedRevisorVotes:function(){var t=parseInt(this.turnout*this.constant.revisor_error),e=this.turnout-t,a=parseInt(Math.abs(e)/this.reg*100),i=this.turnout+t,r=parseInt(Math.abs(i)/this.reg*100);return"От ".concat(e," (").concat(a,"%) до ").concat(i," (").concat(r,"%) избирателей")},computedNeededBoxes:function(){var t=this.$store.getters["Modal/getUik"];if(this.$store.getters["Modal/getViolation"].hasOwnProperty("constant")&&t.hasOwnProperty("voters_registered")){var e=this.constant;if(t.voters_registered<=e.one_box_voters_threshold)return"1";if(e.one_box_voters_threshold<t.voters_registered<=e.two_box_voters_threshold)return"2";if(t.voters_registered>=e.three_box_voters_threshold)return"3+"}return"н/д"}}),r(i,"filters",{boolean:function(t){return t?"нет":"да"}}),i),o=a(0),s=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tip",{attrs:{title:t.computedViolationTypeName},scopedSlots:t._u([{key:"btn",fn:function(){return[t._v(t._s(t.computedViolationTypeName))]},proxy:!0}])},[t._v(" "),a("div",{staticClass:"tip-dropdown__title mb-3",staticStyle:{width:"300px"}},[t._v("О событии")]),t._v(" "),a("ul",{staticClass:"tip-dropdown__list"},[a("li",{attrs:{"data-key":"Идентификатор(ы):"}},[t._v(t._s(t.computedViolationId))]),t._v(" "),t.issetDate&&7!==t.computedViolationType?[a("li",{attrs:{"data-key":"Дата:"}},[t._v(t._s(t.date))]),t._v(" "),t.time?a("li",{attrs:{"data-key":"Время:"}},[t._v(t._s(t.time))]):t._e()]:t._e(),t._v(" "),7===t.computedViolationType?[a("li",{attrs:{"data-key":"Официальная явка:"}},[t._v("\n        "+t._s(t.official)+", "+t._s(parseInt(t.official/t.reg*100))+"%\n      ")]),t._v(" "),a("li",{attrs:{"data-key":"Явка от ревизора:"}},[a("tip-overflow",{attrs:{text:t.computedRevisorVotes,"with-border":!0}},[t._v("\n          "+t._s(t.turnout)+" ± "+t._s(parseInt(t.turnout*t.constant.revisor_error))+",\n          "+t._s(parseInt(t.official/t.reg*100))+"%\n        ")])],1),t._v(" "),a("li",{attrs:{"data-key":"Отклонение:"}},[a("tip-overflow",{attrs:{text:t.computedDeviation,"with-border":!0}},[t._v("\n          "+t._s(parseInt(t.deviation))+" ±\n          "+t._s(parseInt(Math.abs(t.deviation)*t.constant.revisor_error))+",\n          "+t._s(parseInt(Math.abs(t.deviation)/t.official*100))+"%\n        ")])],1),t._v(" "),a("li",{attrs:{"data-key":"Обработан Ревизором без ошибок:"}},[t._v("\n        "+t._s(t._f("boolean")(t.skipVotesSummary))+"\n      ")])]:t._e(),t._v(" "),6===t.computedViolationType?[a("li",{attrs:{"data-key":"Официальная явка:"}},[t._v("\n        "+t._s(t.official)+", "+t._s(parseInt(t.official/t.reg*100))+"%\n      ")]),t._v(" "),a("li",{attrs:{"data-key":"Явка от ревизора:"}},[a("tip-overflow",{attrs:{text:t.computedRevisorVotes,"with-border":!0}},[t._v("\n          "+t._s(t.turnout)+" ± "+t._s(parseInt(t.turnout*t.constant.revisor_error))+",\n          "+t._s(parseInt(t.official/t.reg*100))+"%\n        ")])],1),t._v(" "),a("li",{attrs:{"data-key":"Отклонение:"}},[a("tip-overflow",{attrs:{text:t.computedDeviation,"with-border":!0}},[t._v("\n          "+t._s(parseInt(t.deviation))+" ±\n          "+t._s(parseInt(Math.abs(t.deviation)*t.constant.revisor_error))+",\n          "+t._s(parseInt(Math.abs(t.deviation)/t.official*100))+"%\n        ")])],1),t._v(" "),a("li",{attrs:{"data-key":"Обработан Ревизором без ошибок:"}},[t._v("\n        "+t._s(t._f("boolean")(t.skipVotesSummary))+"\n      ")])]:t._e(),t._v(" "),4===t.computedViolationType?[a("li",{attrs:{"data-key":"Коэф. размера ящиков:"}},[t._v("\n        "+t._s(t.computedCoefficient)+"\n      ")])]:t._e(),t._v(" "),5===t.computedViolationType?[a("li",{attrs:{"data-key":"Ящиков необходимо:"}},[t._v(t._s(t.computedNeededBoxes))]),t._v(" "),a("li",{attrs:{"data-key":"Ящиков в поле зрении камеры:"}},[t._v("3")])]:t._e()],2),t._v(" "),a("div",{staticClass:"tip-dropdown__title mt-4 mb-3"},[t._v("Ручной подсчет явки")]),t._v(" "),a("ul",{staticClass:"tip-dropdown__list"},[a("li",{attrs:{"data-key":"Отправлен на ручной подсчет:"}},[t._v("да")]),t._v(" "),a("li",{attrs:{"data-key":"Реальная явка:"}},[t._v("341")]),t._v(" "),a("li",{attrs:{"data-key":"Отклонение от реальной:"}},[t._v("623")])])])}),[],!1,null,null,null);e.default=s.exports},function(t,e,a){"use strict";a.r(e);var i={props:{camera:{type:String,required:!0}},data:function(){return{date:null,errors:[]}},created:function(){var t=this.computedUik.date;this.date=new Date(t).getTime(),setInterval(this.timeCounter,1e3)},methods:{timeCounter:function(){this.date&&(this.date+=1e3)}},computed:{computedViolationType:function(){return this.$store.getters["Modal/getViolation"].type},computedUik:function(){return this.$store.getters["Modal/getUik"]},computedCameras:function(){var t=this,e=this.$store.getters["Modal/getUik"].cameras;return 1===this.computedViolationType?e.filter((function(e){return String(e.id)===t.camera})):e},computedName:function(){var t=this,e=this.computedUik,a=this.computedViolationType,i=e.cameras.reduce((function(e,a){return String(a.id)===t.camera?a.number:e}),"");return 1===a?e.name+", камера "+i:e.name},computedDate:function(){if(!this.date)return"";var t=new Date(this.date),e=t.getFullYear(),a=t.getMonth()<9?"0"+Number(t.getMonth()+1):Number(t.getDate()+1),i=t.getDate()<10?"0"+t.getDate():t.getDate(),r=t.getHours()<10?"0"+t.getHours():t.getHours(),n=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return"".concat(r,":").concat(n,":").concat(o," ").concat(e,".").concat(a,".").concat(i)}},filters:{boolean:function(t){return t?"да":"нет"}}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tip",{attrs:{title:t.computedName},scopedSlots:t._u([{key:"btn",fn:function(){return[t._v(t._s(t.computedName))]},proxy:!0}])},[t._v(" "),a("div",{staticClass:"tip-dropdown__title mb-3"},[t._v("Об участке")]),t._v(" "),a("ul",{staticClass:"tip-dropdown__list"},[a("li",{attrs:{"data-key":"Идентификатор:"}},[t._v(t._s(t.computedUik.id))]),t._v(" "),a("li",{attrs:{"data-key":"Адрес:"}},[t._v(t._s(t.computedUik.address))]),t._v(" "),a("li",{attrs:{"data-key":"Подходит для подсчета:"}},[t._v("\n      "+t._s(t._f("boolean")(t.computedUik.countable))+"\n    ")]),t._v(" "),a("li",{staticClass:"space-no-wrap",attrs:{"data-key":"Время на участке:"}},[t._v("\n      "+t._s(t.computedDate)+"\n    ")])]),t._v(" "),a("button",{staticClass:"btn btn--light mt-2"},[t._v("Подробнее")]),t._v(" "),t._l(t.computedCameras,(function(e,i){return[a("div",{key:i,staticClass:"tip-dropdown__title mb-3 mt-4"},[t._v("\n      Камера #"+t._s(e.number)+"\n    ")]),t._v(" "),a("ul",{staticClass:"tip-dropdown__list"},[a("li",{attrs:{"data-key":"Выбрана для подсчёта явки:"}},[t._v("\n        "+t._s(t._f("boolean")(e.countable))+"\n      ")]),t._v(" "),a("li",{attrs:{"data-key":"Идентификатор:"}},[t._v(t._s(e.code))])])]}))],2)}),[],!1,null,null,null);e.default=n.exports},function(t,e,a){"use strict";a.r(e);var i={props:{disabled:{type:Boolean,required:!1}},data:function(){return{data:{violation:null,text:""},isPressed:!1,isLoading:!1}},computed:{computedComments:function(){var t=this;return this.$store.getters["Modal/getComments"].map((function(e){return Object.assign({},e,{time:t.formatTimeHelper(new Date(e.time+"Z"))})}))}},watch:{isPressed:function(t){t?document.addEventListener("keydown",this.pressKeyEnter):document.removeEventListener("keydown",this.pressKeyEnter)}},methods:{focusComment:function(t){this.isPressed=!0},blurComment:function(t){this.isPressed=!1},pressKeyEnter:function(t){var e=this;this.isPressed&&"Enter"===t.key&&this.validate()&&(this.isPressed=!1,this.isLoading=!0,this.$store.dispatch("Modal/storeComment",this.data).then((function(t){t.hasOwnProperty("errors")?e.errors=t.errors:(e.errors=[],e.data.text="",e.isPressed=!0),e.isLoading=!1})))},validate:function(){return!!this.data.text}},mounted:function(){var t=this.$store.getters["Modal/getViolation"];this.data.violation=t.id}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card card--small"},[t.isLoading?a("preloader"):t._e(),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"card__body",style:{"max-height":"400px","overflow-y":"auto"}},[a("div",{staticClass:"comment"},[a("div",{staticClass:"comment__input"},[a("input-text",{attrs:{placeholder:"Напишите комментарий",disabled:t.disabled},on:{focus:t.focusComment,blur:t.blurComment},model:{value:t.data.text,callback:function(e){t.$set(t.data,"text",e)},expression:"data.text"}})],1),t._v(" "),a("div",{staticClass:"comment__list"},[a("ul",{staticClass:"comment-list"},t._l(t.computedComments,(function(e,i){return a("li",{key:i},[a("div",{staticClass:"comment-item"},[a("div",{staticClass:"comment-item__head"},[a("div",{staticClass:"comment-item__name"},[t._v(t._s(e.username))]),t._v(" "),a("div",{staticClass:"comment-item__date"},[t._v("\n                  "+t._s(e.date)+"\n                  "+t._s(e.time)+"\n                ")])]),t._v(" "),a("div",{staticClass:"comment-item__text"},[t._v(t._s(e.comment))])])])})),0)])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card__header"},[e("h3",[this._v("Комментарии")])])}],!1,null,null,null);e.default=n.exports},function(t,e,a){"use strict";a.r(e);var i={mixins:[a(7).a],components:{UploadClaim:a(42).default,UploadResponse:a(43).default},props:{disabled:{type:Boolean,required:!1}},data:function(){return{data:{check:1,violation:null,applicant:"",content:"",decree:"",violationType:"",file:""},claimLink:"",responseLink:"",errors:[],result:[],rules:{content:["required"]},labels:{applicant:"Заявитель",content:"Содержание",decree:"Постановление"},isLoading:!1,popup:{uploadClaim:!1,uploadResponse:!1}}},computed:{computedViolationStatus:function(){return this.$store.getters["Modal/getViolation"].status},computedApplicantList:function(){return this.$store.getters["Modal/getClaim"].applicantList.map((function(t){return{value:String(t.id),name:t.name}}))},computedCommission:function(){var t=this;return this.$store.getters["Modal/getClaim"].applicantList.reduce((function(e,a){return String(a.id)===t.data.applicant?a.commission:e}),"н/д")},computedVoting:function(){return this.$store.getters["Modal/getClaim"].checkEndDate===this.$store.getters["Modal/getViolation"].date_end?"День выборов":"Досрочное"},computedDecreeList:function(){return this.$store.getters["Modal/getClaim"].decreeList.map((function(t){return{value:String(t.id),name:t.name}}))},computedDecree:function(){var t=this;return this.computedDecreeList.reduce((function(e,a){return t.data.decree===a.value?a.name:e}),"н/д")},computedUsername:function(){return this.$store.getters["Modal/getViolation"].username},computedClaimLink:function(){return this.$store.getters["Modal/getViolation"].protocol_link},computedResponseLink:function(){return this.$store.getters["Modal/getViolation"].response_link},computedApplicant:function(){var t=this;return this.computedApplicantList.reduce((function(e,a){return t.data.applicant===a.value?a.name:e}),"н/д")}},methods:{clickGenerate:function(){var t=this;this.validate()&&(this.isLoading=!0,this.$store.dispatch("Modal/storeClaim",this.data).then((function(e){if(e.hasOwnProperty("errors"))t.errors=e.errors;else{t.errors=[];var a=document.createElement("a");a.href=e.claimPath,a.target="_blank",a.click()}t.isLoading=!1})))},changeReGenerate:function(t){var e=this;this.isLoading=!0,this.$store.dispatch("Modal/restoreClaim",this.data).then((function(t){t.hasOwnProperty("errors")?e.errors=t.errors:e.errors=[],e.isLoading=!1}))},clickDownloadClaim:function(){var t=document.createElement("a");t.href=this.computedClaimLink,t.target="_blank",t.click()},clickDownloadResponse:function(){var t=document.createElement("a");t.href=this.computedResponseLink,t.target="_blank",t.click()},getResult:function(t){this.userIds=[],this.lastId=null,this.result=[t]}},mounted:function(){var t=this.$store.getters["Modal/getViolation"];this.data.violation=t.id,this.data.violationType=t.type,this.data.content=t.text,this.data.applicant=String(t.applicant),this.data.decree=String(t.decree)}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{attrs:{size:"small"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Жалоба")]},proxy:!0},{key:"title-right",fn:function(){return[a("tip",{attrs:{title:"Заголовок подсказки"}})]},proxy:!0}])},[t.isLoading?a("preloader"):t._e(),t._v(" "),a("alert",{attrs:{messages:t.errors}}),t._v(" "),a("alert",{attrs:{messages:t.result}}),t._v(" "),t._v(" "),t._v(" "),a("ul",{staticClass:"list"},[a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Заявитель:"}},[1===t.computedViolationStatus?[a("input-select",{attrs:{size:"slim",data:t.computedApplicantList,disabled:t.disabled},model:{value:t.data.applicant,callback:function(e){t.$set(t.data,"applicant",e)},expression:"data.applicant"}})]:[t._v("\n        "+t._s(t.computedApplicant)+"\n      ")]],2),t._v(" "),a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Комиссия:"}},[t._v("\n      "+t._s(t.computedCommission)+"\n    ")]),t._v(" "),a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Голосование:"}},[t._v("\n      "+t._s(t.computedVoting)+"\n    ")]),t._v(" "),a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Постановление:"}},[1===t.computedViolationStatus?[a("input-select",{attrs:{size:"slim",data:t.computedDecreeList,disabled:t.disabled},model:{value:t.data.decree,callback:function(e){t.$set(t.data,"decree",e)},expression:"data.decree"}})]:[t._v("\n        "+t._s(t.computedDecree)+"\n      ")]],2),t._v(" "),a("li",{staticClass:"list__item list__item--key list__item--wrap",attrs:{"data-key":"Содержание:"}},[a("input-textarea",{attrs:{disabled:1!==t.computedViolationStatus||t.disabled},model:{value:t.data.content,callback:function(e){t.$set(t.data,"content",e)},expression:"data.content"}})],1),t._v(" "),1!==t.computedViolationStatus?a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"В работе у пользователя:"}},[t._v("\n      "+t._s(t.computedUsername)+"\n    ")]):t._e(),t._v(" "),7===t.computedViolationStatus?a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Сформировать повторно:"}},[a("input-toggle",{attrs:{disabled:t.disabled},on:{change:t.changeReGenerate}})],1):t._e(),t._v(" "),a("li",{staticClass:"list__item"},[1===t.computedViolationStatus?[a("button",{staticClass:"btn btn--primary mr-1",attrs:{disabled:t.disabled},on:{click:t.clickGenerate}},[t._v("\n          "+t._s(t.data.file?"Далее":"Сформировать")+"\n        ")]),t._v(" "),a("button",{staticClass:"btn btn--light",attrs:{disabled:t.disabled},on:{click:function(e){t.popup.uploadClaim=!0}}},[t._v("\n          Загрузить свою жалобу\n        ")])]:t._e(),t._v(" "),3===t.computedViolationStatus?[a("button",{staticClass:"btn btn--primary mr-1",attrs:{disabled:t.disabled},on:{click:function(e){t.popup.uploadResponse=!0}}},[t._v("\n          Прикрепить ответ\n        ")])]:t._e(),t._v(" "),1!==t.computedViolationStatus&&3!==t.computedViolationStatus?[a("button",{staticClass:"btn btn--primary mr-1",attrs:{disabled:t.disabled},on:{click:t.clickDownloadResponse}},[t._v("\n          Скачать ответ\n        ")])]:t._e(),t._v(" "),1!==t.computedViolationStatus?[a("button",{staticClass:"btn btn--light",attrs:{disabled:t.disabled},on:{click:t.clickDownloadClaim}},[t._v("\n          Скачать жалобу\n        ")])]:t._e()],2)]),t._v(" "),a("upload-claim",{attrs:{disabled:t.disabled,shown:t.popup.uploadClaim},on:{close:function(e){t.popup.uploadClaim=!1}},model:{value:t.data.file,callback:function(e){t.$set(t.data,"file",e)},expression:"data.file"}}),t._v(" "),a("upload-response",{attrs:{disabled:t.disabled,shown:t.popup.uploadResponse},on:{result:t.getResult,close:function(e){t.popup.uploadResponse=!1}}})],1)}),[],!1,null,null,null);e.default=n.exports},function(t,e,a){"use strict";a.r(e);var i={components:{mediaImage:a(44).default,mediaVideo:a(45).default},props:{},data:function(){return{media:"1"}},computed:{computedMedia:function(){return[{value:"1",name:"Фото"},{value:"2",name:"Видео"}]}},mounted:function(){}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{attrs:{size:"small"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Подтверждение события")]},proxy:!0},{key:"title-right",fn:function(){return[a("tip",{attrs:{title:"Заголовок подсказки"}})]},proxy:!0}])},[t._v(" "),t._v(" "),a("ul",{staticClass:"list"},[a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Данные:"}},[a("input-select",{attrs:{size:"slim",data:t.computedMedia},model:{value:t.media,callback:function(e){t.media=e},expression:"media"}})],1)]),t._v(" "),a("media-image",{directives:[{name:"show",rawName:"v-show",value:"1"===t.media,expression:"media === '1'"}]}),t._v(" "),a("media-video",{directives:[{name:"show",rawName:"v-show",value:"2"===t.media,expression:"media === '2'"}]})],1)}),[],!1,null,null,null);e.default=n.exports},function(t,e,a){"use strict";a.r(e);var i={props:{camera:{type:String,required:!0}},data:function(){return{data:{duration:""},isLoading:!1,day:""}},computed:{computedChartBar:function(){var t=this;return this.$store.getters["Modal/getVideoTimes"].reduce((function(e,a){return a.day===t.day?a.timings:e}),[]).reduce((function(t,e){var a=t.length;return t.push({durationInHours:e.durationInHours,data:a?[e.durationInHours-t[a-1].durationInHours]:[e.durationInHours],color:e.broadcast?"green":"red",tooltipData:"".concat(e.timeStart," - ").concat(e.timeEnd)}),t}),[]).reverse()},table:function(){var t=this,e={key:"№",date:"Дата",disappeared:"Пропала",appeared:"Появилась",duration:"Длительность"},a=this.$store.getters["Modal/getViolationList"].map((function(e,a){return{key:a+1,date:e.date,disappeared:t.formatTimeHelper(e.disappeared),appeared:t.formatTimeHelper(e.appeared),duration:e.duration}}));return{data:a,options:{headings:e,_data:a,sortByColumn:!0,sortable:["key","date"]},columns:Object.keys(e)}},computedCamera:function(){var t=this;return this.$store.getters["Modal/getUik"].cameras.reduce((function(e,a){return String(a.id)===t.camera?a.number:e}),"")},computedDays:function(){var t=this.$store.getters["Modal/getVideoTimes"].map((function(t){return t.day}));return this.day=t.length?t[0]:"",t}},watch:{},methods:{changeData:function(t){var e=this;this.isLoading=!0;var a=this.data.duration;this.$store.dispatch("Modal/showViolationList",{duration:a,camera:this.camera}).then((function(t){t.hasOwnProperty("errors")&&(e.errors=t.errors),e.isLoading=!1}))}},mounted:function(){}},r=(a(21),a(0)),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card card--small"},[a("div",{staticClass:"card__header"},[a("h3",[t._v("Наличие трансляции видео. Камера #"+t._s(t.computedCamera))])]),t._v(" "),a("div",{staticClass:"card__body"},[t._l(t.computedDays,(function(e,i){return a("div",{key:i,staticClass:"pill"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.day,expression:"day"}],attrs:{type:"radio",id:"pill-"+i,hidden:""},domProps:{value:e,checked:t._q(t.day,e)},on:{change:function(a){t.day=e}}}),t._v(" "),a("label",{attrs:{for:"pill-"+i}},[t._v(t._s(e)+" ")])])})),t._v(" "),a("chart-high-bar",{key:t.day,attrs:{data:t.computedChartBar}})],2)]),t._v(" "),a("div",{staticClass:"card card--small"},[t.isLoading?a("preloader"):t._e(),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"card__body"},[a("div",{staticClass:"event__toggle",attrs:{"data-key":"Больше минуты:"}},[a("input-toggle-radio",{attrs:{value:"moreMinute"},on:{input:t.changeData},model:{value:t.data.duration,callback:function(e){t.$set(t.data,"duration",e)},expression:"data.duration"}})],1),t._v(" "),a("div",{staticClass:"event__toggle",attrs:{"data-key":"Больше часа:"}},[a("input-toggle-radio",{attrs:{value:"moreHour"},on:{input:t.changeData},model:{value:t.data.duration,callback:function(e){t.$set(t.data,"duration",e)},expression:"data.duration"}})],1),t._v(" "),a("div",{staticClass:"event__toggle",attrs:{"data-key":"Нет трансляции:"}},[a("input-toggle-radio",{attrs:{value:"none"},on:{input:t.changeData},model:{value:t.data.duration,callback:function(e){t.$set(t.data,"duration",e)},expression:"data.duration"}})],1),t._v(" "),a("v-client-table",{attrs:{data:t.table.data,columns:t.table.columns,options:t.table.options}})],1)],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card__header"},[e("h3",[this._v("Периоды, когда не было трансляции")])])}],!1,null,null,null);e.default=n.exports},function(t,e,a){"use strict";a.r(e);var i={data:function(){return{isPressed:!1,isLoading:!0,day:"",votesCount:null,error:null}},computed:{computedViolationType:function(){return this.$store.getters["Modal/getViolation"].type},computedVotesByDay:function(){var t=this,e=this.$store.getters["Modal/getConstant"];if(6===this.computedViolationType){var a=this.$store.getters["Modal/getIntermediateOfficialVotes"];this.day=a.hasOwnProperty("violation_datetime_start")?a.violation_datetime_start:""}var i=this.votesCount=this.$store.getters["Modal/getRevisorVotes"].filter((function(e){return e.day===t.day})).reduce((function(t,e){return t+e.times.length}),0),r=this.error=parseInt(i*e.revisor_error),n=i+r;return"От ".concat(i-r," до ").concat(n," избирателей")},computedDays:function(){var t=this.$store.getters["Modal/getRevisorVotes"].map((function(t){return t.day}));return this.day=t.length?t[0]:"",t},computedWheelChart:function(){var t=this.$store.getters["Modal/getRevisorVotes"].reduce((function(t,e){return t.hasOwnProperty("conf10")?{conf10:t.conf10+e.vote_conf.conf10,conf20:t.conf20+e.vote_conf.conf20,conf30:t.conf30+e.vote_conf.conf30,conf40:t.conf40+e.vote_conf.conf40,conf50:t.conf50+e.vote_conf.conf50,conf60:t.conf60+e.vote_conf.conf60,conf70:t.conf70+e.vote_conf.conf70,conf80:t.conf80+e.vote_conf.conf80,conf90:t.conf90+e.vote_conf.conf90,conf100:t.conf100+e.vote_conf.conf100}:e.vote_conf}),{}),e=[],a=[];for(var i in t)e.push(i),a.push(t[i]);return{chartdata:{labels:e.map((function(t){switch(t){case"conf10":return"0-10%";case"conf20":return"10-20%";case"conf30":return"20-30%";case"conf40":return"30-40%";case"conf50":return"40-50%";case"conf60":return"50-60%";case"conf70":return"60-70%";case"conf80":return"70-80%";case"conf90":return"80-90%";case"conf100":return"90-100%"}})),datasets:[{label:"My First Dataset",data:a,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)"],hoverOffset:4}]},options:{}}},computedLineChart:function(){var t=this,e=this.$store.getters["Modal/getRevisorVotes"].filter((function(e){return e.day===t.day})),a=this.$store.getters["Modal/getRealVotes"].filter((function(e){return e.day===t.day})),i=e.length?e[0].times:[],r=a.length?a[0].times:[];return{chartdata:{labels:i.map((function(t){return t.time})),datasets:[{data:i.map((function(t){return t.votes})),fill:!1,borderColor:"rgb(75, 192, 192)",label:"Ревизор"},{data:r.map((function(t){return t.votes})),fill:!1,borderColor:"rgb(255, 99, 132)",label:"Реальные голоса"}]},options:{scales:{y:{stacked:!1}}}}}}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card card--small"},[t._m(0),t._v(" "),a("div",{staticClass:"card__body"},[6!==t.computedViolationType?t._l(t.computedDays,(function(e,i){return a("div",{key:i,staticClass:"pill"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.day,expression:"day"}],attrs:{type:"radio",id:"pill-"+i,hidden:""},domProps:{value:e,checked:t._q(t.day,e)},on:{change:function(a){t.day=e}}}),t._v(" "),a("label",{attrs:{for:"pill-"+i}},[t._v(t._s(e)+" ")])])})):t._e(),t._v(" "),a("chart-line",{key:t.day,staticClass:"my-3",attrs:{"initial-data":t.computedLineChart}}),t._v(" "),a("div",{staticClass:"mt-2"},[a("span",{staticStyle:{"vertical-align":"top","font-weight":"bold"}},[t._v("Голосов за весь день:")]),t._v(" "),a("tip-overflow",{attrs:{text:t.computedVotesByDay,"with-border":!0}},[t._v("\n          "+t._s(t.votesCount)+" ± "+t._s(t.error)+"\n        ")])],1)],2)]),t._v(" "),a("div",{staticClass:"card card--small pb-3"},[t._m(1),t._v(" "),a("chart-wheel",{staticClass:"mt-3",attrs:{"initial-data":t.computedWheelChart}})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card__header"},[e("h3",[this._v("Явка на участке от Ревизора")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card__header"},[e("h3",[this._v("Уверенность ревизора в голосах")])])}],!1,null,null,null);e.default=n.exports},,,function(t,e,a){"use strict";a.r(e);var i={props:{shown:{type:Boolean,required:!0},value:{type:[String,Blob],required:!1}},data:function(){return{isLoading:!1,errors:[],message:[]}},watch:{shown:function(){this.errors=[]}},computed:{computedFile:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{upload:function(){this.value?this.$emit("close"):this.errors=["Файл для импорта не выбран"]}}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("popup",{attrs:{isLoading:t.isLoading,shown:t.shown},on:{close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Загрузка жалобы")]},proxy:!0},{key:"body",fn:function(){return[a("alert",{attrs:{messages:t.errors.length?t.errors:t.message}}),t._v(" "),a("file",{attrs:{format:"pdf"},model:{value:t.computedFile,callback:function(e){t.computedFile=e},expression:"computedFile"}},[t._v("Файл для импорта ")])]},proxy:!0},{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn--primary ml-auto",on:{click:t.upload}},[t._v("\n      Загрузить\n    ")])]},proxy:!0}])})}),[],!1,null,null,null);e.default=n.exports},function(t,e,a){"use strict";a.r(e);var i={props:{shown:{type:Boolean,required:!0},value:{type:[String,Blob],required:!1}},data:function(){return{isLoading:!1,errors:[],message:[],file:""}},watch:{shown:function(){this.errors=[]}},methods:{upload:function(){var t=this;if(this.file){var e=this.$store.getters["Modal/getViolation"];this.isLoading=!0,this.$store.dispatch("Modal/uploadClaimResponse",{file:this.file,violation:e.id}).then((function(e){e.hasOwnProperty("errors")?t.errors=e.errors:(t.errors=[],t.$emit("result",{text:"Ответ успешно прикреплен!",className:"alert--success"}),t.$emit("close")),t.isLoading=!1}))}else this.errors=["Поле <strong>Файл для импорта</strong> обязательно для заполнения"]}}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("popup",{attrs:{isLoading:t.isLoading,shown:t.shown},on:{close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Загружка ответа")]},proxy:!0},{key:"body",fn:function(){return[a("alert",{attrs:{messages:t.errors.length?t.errors:t.message}}),t._v(" "),a("file",{attrs:{format:"response"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}},[t._v("Файл для импорта ")])]},proxy:!0},{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn--primary ml-auto",on:{click:t.upload}},[t._v("\n      Прикрепить\n    ")])]},proxy:!0}])})}),[],!1,null,null,null);e.default=n.exports},function(t,e,a){"use strict";a.r(e);var i={components:{ModalMediaTip:a(49).default},data:function(){return{recognition:!0,activeImage:{id:null,path:"",date:"",boxes:[],height:"",width:""},swiperOptions:{spaceBetween:5,slidesPerView:2,breakpoints:{993:{spaceBetween:5,slidesPerView:2},769:{spaceBetween:-50,slidesOffsetAfter:-60,slidesPerView:1},500:{spaceBetween:-50,slidesOffsetAfter:-60,slidesPerView:1},0:{spaceBetween:-50,slidesOffsetAfter:-60,slidesPerView:1}}}}},computed:{computedImagesByCamera:function(){var t=this.$store.getters["Modal/getImages"],e=this.activeImage.id;return!this.activeImage.id&&t.length&&t[0].images.length&&(this.activeImage=Object.assign({},t[0].images[0]),e=t[0].images[0].id),t.map((function(t){return Object.assign({},t,{images:t.images.map((function(t){return Object.assign({},t,{className:t.id===e})}))})}))},computedBoxList:function(){return this.recognition&&this.activeImage.boxes.length?this.activeImage.boxes:[]}},methods:{clickImage:function(t){this.activeImage=Object.assign({},t)},parseJsonCoordForSquare:function(t,e){var a,i,r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bbox",s=e.width,c=e.height,l=JSON.parse(t);return"bbox"===o?(a=parseInt(Number(l.x1)*Number(s)),r=parseInt(Number(l.y1)*Number(c)),i=parseInt(Number(l.x2)*Number(s)),n=parseInt(Number(l.y2)*Number(c))):(a=parseInt(Number(l.top_left.x)*Number(s)),r=parseInt(Number(l.top_left.y)*Number(c)),i=parseInt(Number(l.bottom_right.x)*Number(s)),n=parseInt(Number(l.bottom_left.x)*Number(c))),[{x:a,y:r},{x:i,y:r},{x:i,y:n},{x:a,y:n},{x:a,y:r}]}}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"list"},[a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Отображать распознавания ящиков:"}},[a("input-toggle",{model:{value:t.recognition,callback:function(e){t.recognition=e},expression:"recognition"}})],1)]),t._v(" "),a("div",{staticClass:"gallery"},[a("div",{staticClass:"gallery__flex"},t._l(t.computedImagesByCamera,(function(e,i){return a("div",{key:i,staticClass:"gallery__col"},[a("div",{staticClass:"gallery__title",class:{"is-active":e.countable}},[t._v("\n          Камера #"+t._s(e.number)+"\n        ")]),t._v(" "),a("ul",{staticClass:"gallery__list"},[a("li",[a("swiper",{attrs:{options:t.swiperOptions}},t._l(e.images,(function(e,r){return a("div",{key:i+r,staticClass:"swiper-slide"},[a("div",{staticClass:"gallery__list-item",attrs:{"data-date":e.date},on:{click:function(a){return t.clickImage(e)}}},[a("img",{class:{"is-active":e.className},attrs:{src:e.path}})])])})),0)],1)])])})),0),t._v(" "),a("div",{staticClass:"gallery__info"},[a("modal-media-tip",{attrs:{image:t.activeImage}})],1),t._v(" "),t.activeImage.path?a("div",{staticClass:"gallery__image"},[a("image-editor",{key:t.activeImage.id,attrs:{controls:!1,disabled:!0,backgroundImagePath:t.activeImage.path},model:{value:t.computedBoxList,callback:function(e){t.computedBoxList=e},expression:"computedBoxList"}})],1):t._e()])])}),[],!1,null,null,null);e.default=n.exports},function(t,e,a){"use strict";a.r(e);var i={data:function(){return{data:{camera:"",date:"",time:""},isLoading:!1}},computed:{computedCameraList:function(){return this.$store.getters["Modal/getCameraList"].map((function(t){return{value:String(t.id),name:"Камера ".concat(t.number)}}))},computedDateList:function(){var t=this;return this.$store.getters["Modal/getCameraList"].reduce((function(e,a){var i;return t.data.camera===String(a.id)?null!==(i=a.dates)&&void 0!==i?i:[]:e}),[]).map((function(t){return{value:String(t.date),name:String(t.date)}}))},computedTimeList:function(){var t=this;return this.$store.getters["Modal/getCameraList"].reduce((function(e,a){var i;return t.data.camera===String(a.id)?null!==(i=a.dates)&&void 0!==i?i:[]:e}),[]).reduce((function(e,a){return t.data.date===String(a.date)?a.times:e}),[]).map((function(t){return{value:String(t),name:String(t)}}))}},methods:{changeCamera:function(){this.data.date="",this.data.time=""},changeTime:function(){var t=this;this.isLoading=!0;var e=this.data,a=e.camera,i=e.date,r=e.time;r=r.split(" - ");var n="".concat(i," ").concat(r[0]),o="".concat(i," ").concat(r[1]);this.$store.dispatch("Modal/showVideo",{camera:a,dateFrom:n,dateTo:o}).then((function(e){e.hasOwnProperty("errors")?t.errors=e.errors:(t.errors=[],t.$refs.form[0].value=e.p1,t.$refs.form[1].value=e.p2,t.$refs.form[2].value=e.file,t.$refs.form[3].value="[]",t.$refs.form.submit(),t.$refs.iframe.addEventListener("load",(function(){t.isLoading=!1})))}))}},mounted:function(){var t=this.$store.getters["Modal/getViolation"];this.data.camera=this.$store.getters["Modal/getCameraList"].reduce((function(e,a){return a.violation===t.id?String(a.id):e}),"")}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?a("preloader"):t._e(),t._v(" "),a("ul",{staticClass:"list mb-3"},[a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Камера:"}},[a("input-select",{attrs:{size:"slim",data:t.computedCameraList},on:{change:t.changeCamera},model:{value:t.data.camera,callback:function(e){t.$set(t.data,"camera",e)},expression:"data.camera"}})],1)]),t._v(" "),a("ul",{staticClass:"list list--flex"},[a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Дата:"}},[a("input-select",{attrs:{size:"slim",data:t.computedDateList},model:{value:t.data.date,callback:function(e){t.$set(t.data,"date",e)},expression:"data.date"}})],1),t._v(" "),a("li",{staticClass:"list__item list__item--key",attrs:{"data-key":"Время:"}},[a("input-select",{attrs:{size:"slim",data:t.computedTimeList},on:{change:t.changeTime},model:{value:t.data.time,callback:function(e){t.$set(t.data,"time",e)},expression:"data.time"}})],1)]),t._v(" "),a("form",{ref:"form",staticStyle:{width:"800px"},attrs:{method:"post",action:"https://peresmotr.group/player",target:"iframe",hidden:""}},[a("input",{attrs:{type:"hidden",name:"p1"}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"p2"}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"file"}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"report"}})]),t._v(" "),a("iframe",{ref:"iframe",staticClass:"mt-3",staticStyle:{width:"100%",height:"515px",border:"1px solid lightgrey",overflow:"hidden"},attrs:{frameborder:"0",name:"iframe"}})],1)}),[],!1,null,null,null);e.default=n.exports},,,,function(t,e,a){"use strict";a.r(e);var i={props:{image:{type:Object,required:!0}},data:function(){return{errors:[]}},mounted:function(){},filters:{boxTypeDecryptor:function(t){return t?t.map((function(t){return"koib"===t?"КОИБ":"Избирательный ящик"})).join(" и"):""},boolean:function(t){return t?"да":"нет"}}},r=a(0),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tip",{attrs:{title:"Информация о распозновании","button-type":"info"}},[a("div",{staticClass:"tip-dropdown__title mb-3"},[t._v("Основное")]),t._v(" "),a("ul",{staticClass:"tip-dropdown__list"},[a("li",{attrs:{"data-key":"Идентификатор:"}},[t._v(t._s(t.image.id))]),t._v(" "),a("li",{attrs:{"data-key":"Время фото:"}},[t._v(t._s(t.image.date))]),t._v(" "),a("li",{attrs:{"data-key":"Количество ящиков:"}},[t._v(t._s(t.image.boxCount))]),t._v(" "),a("li",{attrs:{"data-key":"Тип ящиков:"}},[t._v("\n      "+t._s(t._f("boxTypeDecryptor")(t.image.boxTypes))+"\n    ")]),t._v(" "),a("li",{attrs:{"data-key":"Минимальный коэф. размера ящиков:"}},[t._v("\n      "+t._s(parseInt(100*t.image.coefficient))+"%\n    ")])]),t._v(" "),a("div",{staticClass:"tip-dropdown__title mb-3 mt-5"},[t._v("О проверке распознавания")]),t._v(" "),a("ul",{staticClass:"tip-dropdown__list"},[a("li",{attrs:{"data-key":"Проверено:"}},[t._v(t._s(t._f("boolean")(t.image.checked)))]),t._v(" "),a("li",{attrs:{"data-key":"Проверил:"}},[t._v(t._s(t.image.username))]),t._v(" "),a("li",{attrs:{"data-key":"Время проверки:"}},[t._v(t._s(t.image.checkDate))])])])}),[],!1,null,null,null);e.default=n.exports},,,,,,,,,,,function(t,e,a){"use strict";a.r(e);var i=a(1),r=a.n(i);function n(t,e,a,i,r,n,o){try{var s=t[n](o),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(i,r)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(i,r){var o=t.apply(e,a);function s(t){n(o,i,r,s,c,"next",t)}function c(t){n(o,i,r,s,c,"throw",t)}s(void 0)}))}}var s={namespaced:!0,state:{violation:{},constant:{},officialVotes:{},intermediateOfficialVotes:{},uik:{},violationStatusList:[],claim:{},comments:[],images:[],cameraList:[],revisorVotes:[],realVotes:[],violationList:[],videoTimes:[]},actions:{show:function(t,e){var a=this;return o(r.a.mark((function i(){var n,o;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.commit,e.violation,i.next=4,axios.get(a.state.requestPath+"/modals/show/",{params:e}).catch((function(t){return console.log("In Modal/show - "+t)}));case 4:if((o=i.sent).data.errors){i.next=24;break}return n("setViolation",o.data.violation),n("setConstant",o.data.constant),n("setOfficialVotes",o.data.officialVotes),n("setUik",o.data.uik),n("setViolationStatusList",o.data.violationStatusList),n("setClaim",o.data.claim),n("setComments",o.data.comments),n("setImages",o.data.images),n("setCameraList",o.data.cameraList),n("setRevisorVotes",o.data.revisorVotes),n("setRealVotes",o.data.realVotes),n("setRealVotes",o.data.realVotes),n("setIntermediateOfficialVotes",o.data.intermediateOfficialVotes),n("setVideoTimes",o.data.videoTimes),n("setViolationList",o.data.violationListWithNotVideo),i.abrupt("return",o.data);case 24:return i.abrupt("return",{errors:Object.values(o.data.errors).map((function(t){return t[0]}))});case 25:case"end":return i.stop()}}),i)})))()},updateViolation:function(t,e){var a=this;return o(r.a.mark((function i(){var n,o;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.commit,e.check,e.violation,e.violatioStatus,i.next=4,axios.put(a.state.requestPath+"/modals/violations",e).catch((function(t){return console.log("In Modal/updateViolation - "+t)}));case 4:if((o=i.sent).data.errors){i.next=11;break}return n("setViolation",o.data.violationForModal),n("ViewCheck/setViolationsForEventTable",o.data.violationForEventTable,{root:!0}),i.abrupt("return",o.data);case 11:return i.abrupt("return",{errors:Object.values(o.data.errors).map((function(t){return t[0]}))});case 12:case"end":return i.stop()}}),i)})))()},storeClaim:function(t,e){var a=this;return o(r.a.mark((function i(){var n,o,s,c;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(s in n=t.commit,e.applicant,e.content,e.decree,e.violation,o=new FormData,e)e.hasOwnProperty(s)&&o.append(s,e[s]);return i.next=6,axios.post(a.state.requestPath+"/modals/claim",o).catch((function(t){return console.log("In Modal/storeClaim - "+t)}));case 6:if((c=i.sent).data.errors){i.next=12;break}return n("setViolation",c.data.violation),i.abrupt("return",c.data);case 12:return i.abrupt("return",{errors:Object.values(c.data.errors).map((function(t){return t[0]}))});case 13:case"end":return i.stop()}}),i)})))()},uploadClaimResponse:function(t,e){var a=this;return o(r.a.mark((function i(){var n,o,s,c;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(s in n=t.commit,e.file,o=new FormData,e)e.hasOwnProperty(s)&&o.append(s,e[s]);return i.next=6,axios.post(a.state.requestPath+"/modals/claim/upload-response",o).catch((function(t){return console.log("In Modal/uploadClaimResponse - "+t)}));case 6:if((c=i.sent).data.errors){i.next=12;break}return n("setViolation",c.data.violation),i.abrupt("return",c.data);case 12:return i.abrupt("return",{errors:Object.values(c.data.errors).map((function(t){return t[0]}))});case 13:case"end":return i.stop()}}),i)})))()},restoreClaim:function(t,e){var a=this;return o(r.a.mark((function i(){var n,o,s;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.commit,e.applicant,e.content,e.decree,o=e.violation,i.next=4,axios.delete(a.state.requestPath+"/modals/claim",{data:{violation:o}}).catch((function(t){return console.log("In Modal/restoreClaim - "+t)}));case 4:if((s=i.sent).data.errors){i.next=10;break}return n("setViolation",s.data),i.abrupt("return",s.data);case 10:return i.abrupt("return",{errors:Object.values(s.data.errors).map((function(t){return t[0]}))});case 11:case"end":return i.stop()}}),i)})))()},storeComment:function(t,e){var a=this;return o(r.a.mark((function i(){var n,o;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.commit,e.violation,e.text,i.next=4,axios.post(a.state.requestPath+"/modals/comments",e).catch((function(t){return console.log("In Modal/storeComment - "+t)}));case 4:if((o=i.sent).data.errors){i.next=10;break}return n("setComments",o.data),i.abrupt("return",o.data);case 10:return i.abrupt("return",{errors:Object.values(o.data.errors).map((function(t){return t[0]}))});case 11:case"end":return i.stop()}}),i)})))()},showVideo:function(t,e){var a=this;return o(r.a.mark((function i(){var n;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t.commit,e.camera,e.dateFrom,e.dateTo,i.next=4,axios.get(a.state.requestPath+"/modals/video",{params:e}).catch((function(t){return console.log("In Modal/showMedia - "+t)}));case 4:if((n=i.sent).data.errors){i.next=9;break}return i.abrupt("return",n.data);case 9:return i.abrupt("return",{errors:Object.values(n.data.errors).map((function(t){return t[0]}))});case 10:case"end":return i.stop()}}),i)})))()},showViolationList:function(t,e){var a=this;return o(r.a.mark((function i(){var n,o;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.commit,e.duration,e.camera,i.next=4,axios.get(a.state.requestPath+"/modals/violations/list",{params:e}).catch((function(t){return console.log("In Modal/showViolationList - "+t)}));case 4:if((o=i.sent).data.errors){i.next=10;break}return n("setViolationList",o.data),i.abrupt("return",o.data);case 10:return i.abrupt("return",{errors:Object.values(o.data.errors).map((function(t){return t[0]}))});case 11:case"end":return i.stop()}}),i)})))()},updateViolationBlocked:function(t,e){var a=this;return o(r.a.mark((function i(){var n,o;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.commit,e.check,e.violation,e.blocked,i.next=4,axios.put(a.state.requestPath+"modals/violations",e).catch((function(t){return console.log("In ViewRecognition/updateViolationBlocked - "+t)}));case 4:if((o=i.sent).data.errors){i.next=10;break}return n("ViewCheck/setViolationsForEventTable",o.data,{root:!0}),i.abrupt("return",o);case 10:return i.abrupt("return",{errors:Object.values(o.data.errors).map((function(t){return t[0]}))});case 11:case"end":return i.stop()}}),i)})))()}},mutations:{setViolation:function(t,e){return t.violation=e},setConstant:function(t,e){return t.constant=e},setOfficialVotes:function(t,e){return t.officialVotes=e},setUik:function(t,e){return t.uik=e},setViolationStatusList:function(t,e){return t.violationStatusList=e},setClaim:function(t,e){return t.claim=e},setComments:function(t,e){return t.comments=e},setImages:function(t,e){return t.images=e},setCameraList:function(t,e){return t.cameraList=e},setRevisorVotes:function(t,e){return t.revisorVotes=e},setRealVotes:function(t,e){return t.realVotes=e},setIntermediateOfficialVotes:function(t,e){return t.intermediateOfficialVotes=e},setViolationList:function(t,e){return t.violationList=e},setVideoTimes:function(t,e){return t.videoTimes=e}},getters:{getViolation:function(t){return t.violation},getConstant:function(t){return t.constant},getOfficialVotes:function(t){return t.officialVotes},getUik:function(t){return t.uik},getViolationStatusList:function(t){return t.violationStatusList},getClaim:function(t){return t.claim},getComments:function(t){return t.comments},getImages:function(t){return t.images},getCameraList:function(t){return t.cameraList},getRevisorVotes:function(t){return t.revisorVotes},getRealVotes:function(t){return t.realVotes},getIntermediateOfficialVotes:function(t){return t.intermediateOfficialVotes},getViolationList:function(t){return t.violationList},getVideoTimes:function(t){return t.videoTimes}}},c={components:{ModalTipViolation:a(33).default,ModalTipUik:a(34).default,ModalComment:a(35).default,ModalClaim:a(36).default,ModalMedia:a(37).default,ModalBroadcast:a(38).default,ModalRevisor:a(39).default},props:{props:{type:Object,required:!0,validator:function(t){return t.hasOwnProperty("check")&&t.hasOwnProperty("camera")&&t.hasOwnProperty("uik")&&t.hasOwnProperty("violation")}},shown:{type:Boolean,required:!0}},data:function(){return{data:{comment:""},isLoading:!1,isMounting:!0,errors:[],messages:[{className:"alert--info",text:"Данное нарушение блокировано другим пользователем."}],blocked:!0}},mounted:function(){var t=this;window.onblur=function(){if(!t.blocked){var e=t.props.check,a=t.props.violation;t.$store.dispatch("Modal/updateViolationBlocked",{check:e,violation:a,blocked:0})}t.$emit("close")}},watch:{shown:function(t){t&&this.init()}},computed:{computedViolationType:function(){return String(this.$store.getters["Modal/getViolation"].type)},computedViolationStatus:{get:function(){return String(this.$store.getters["Modal/getViolation"].status)},set:function(t){this.changeViolationStatus(t)}},computedViolationColor:function(){switch(this.computedViolationStatus){case"1":return"red";case"2":return"orange";case"3":return"yellow";case"4":return"green";case"5":return"grey";case"6":return"dark-grey";case"7":return"blue"}},computedViolationStatusList:function(){var t=this;return this.$store.getters["Modal/getViolationStatusList"].map((function(e){var a=t.computedViolationStatus,i=String(e.id);return e={value:i,label:e.name,name:"status"},"1"===a&&"2"!==i&&"6"!==i||"2"===a||"3"===a&&"4"!==i&&"6"!==i||"4"===a&&"6"!==i||"5"===a&&"6"!==i&&"7"!==i||"7"===a?Object.assign(e,{disabled:!0}):e}))},computedShowMedia:function(){return"4"===this.computedViolationType||"5"===this.computedViolationType},computedShowRevisor:function(){return"6"===this.computedViolationType||"7"===this.computedViolationType}},methods:{init:function(){var t=this;this.isMounting=!0,this.isLoading=!0,this.$store.dispatch("Modal/show",this.props).then((function(e){e.hasOwnProperty("errors")?t.errors=e.errors:(t.errors=[],t.blocked=!!e.violation.hasOwnProperty("blocked")&&e.violation.blocked),t.isMounting=!1,t.isLoading=!1}))},clickCloseModal:function(){if(!this.blocked){var t=this.props.check,e=this.props.violation;this.$store.dispatch("Modal/updateViolationBlocked",{check:t,violation:e,blocked:0})}this.$emit("close")},changeViolationStatus:function(t){var e=this,a=this.$store.getters["Modal/getViolation"];this.isLoading=!0,this.$store.dispatch("Modal/updateViolation",{violation:a.id,violationStatus:t,check:this.props.check}).then((function(t){t.hasOwnProperty("errors")?e.errors=t.errors:e.errors=[],e.isLoading=!1}))}},created:function(){this.$store.registerModule("Modal",s)}},l=a(0),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("popup",{attrs:{width:"1000px",isLoading:t.isLoading,shown:t.shown},on:{close:t.clickCloseModal},scopedSlots:t._u([t.isMounting?null:{key:"sign",fn:function(){return[a("sign-type",{attrs:{type:t.computedViolationType}})]},proxy:!0},t.isMounting?null:{key:"header",fn:function(){return[a("modal-tip-violation",{attrs:{violation:t.props.violation}})]},proxy:!0},t.isMounting?null:{key:"subheader",fn:function(){return[a("modal-tip-uik",{attrs:{camera:t.props.camera}})]},proxy:!0},t.isMounting?null:{key:"right-side",fn:function(){return[a("multiple-select",{attrs:{data:t.computedViolationStatusList,color:t.computedViolationColor,disabled:t.blocked},model:{value:t.computedViolationStatus,callback:function(e){t.computedViolationStatus=e},expression:"computedViolationStatus"}})]},proxy:!0},t.isMounting?null:{key:"body",fn:function(){return[t.blocked?a("alert",{attrs:{messages:t.messages}}):t._e(),t._v(" "),a("div",{staticClass:"card__container"},[a("div",{staticClass:"card__col card__col--65"},[t.computedShowMedia?a("modal-media"):t._e(),t._v(" "),"1"===t.computedViolationType?a("modal-broadcast",{attrs:{camera:t.props.camera}}):t._e(),t._v(" "),t.computedShowRevisor?a("modal-revisor"):t._e()],1),t._v(" "),a("div",{staticClass:"card__col card__col--35"},[a("modal-claim",{attrs:{disabled:t.blocked}}),t._v(" "),a("modal-comment",{attrs:{disabled:t.blocked}})],1)])]},proxy:!0}],null,!0)})}),[],!1,null,null,null);e.default=u.exports}]]);
//# sourceMappingURL=1.chunk.js.map