(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{10:function(t,e,a){var i=a(20);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(9)(i,s);i.locals&&(t.exports=i.locals)},19:function(t,e,a){"use strict";var i=a(10);a.n(i).a},20:function(t,e,a){(t.exports=a(8)(!1)).push([t.i,".leaflet-map[data-v-341976d4] {\n  height: 600px;\n}",""])},51:function(t,e,a){"use strict";a.r(e);var i={props:{marker:{type:Object,required:!0}},computed:{computedDeviation:function(){var t=this.marker;return t.deviation+" ± "+t.deviation_error+", "+t.official_turnout_percent},computedTipDeviation:function(){var t=this.marker,e=t.deviation-t.deviation_error,a=Math.abs(e)/t.votes_official_count*100,i=t.deviation+t.deviation_error,s=Math.abs(i)/t.votes_official_count*100;return"От ".concat(e," (").concat(a,"%) до ").concat(i," (").concat(s,"%) избирателей'")}},mounted:function(){}},s=a(0),n={components:{UikMapMarker:Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"in-marker"},[a("div",{staticClass:"in-marker__head"},[a("div",{staticClass:"in-marker__title"},[t._v("\n      Регион "+t._s(t.marker.region)+", УИК "+t._s(t.marker.uik_number)+"\n    ")]),t._v(" "),a("div",{staticClass:"in-marker__sign"},[t.marker.violation_types.length?a("ul",{staticClass:"in-marker-sign"},t._l(t.marker.violation_types,(function(t,e){return a("li",{key:e})})),0):t._e()])]),t._v(" "),a("div",{staticClass:"in-marker__body"},[a("div",{staticClass:"in-marker__left"},[a("ul",{staticClass:"in-marker-list"},[a("li",{staticClass:"in-marker-list__item",attrs:{"data-key":"Событий"}},[t._v("\n          "+t._s(t.marker.violations_count)+"\n        ")]),t._v(" "),a("li",{staticClass:"in-marker-list__item",attrs:{"data-key":"Избирателей"}},[t._v("\n          "+t._s(t.marker.voters_registered)+"\n        ")]),t._v(" "),a("li",{staticClass:"in-marker-list__item",attrs:{"data-key":"Явка"}},[t._v("\n          "+t._s(t.marker.votes_cameras_main_true_count)+" ±\n          "+t._s(t.marker.votes_cameras_main_true_count_with_revisor_error)+"\n        ")])]),t._v(" "),a("div",{staticClass:"in-marker-box"},[a("div",{staticClass:"in-marker-box__head"},[t._v("Основное")]),t._v(" "),a("div",{staticClass:"in-marker-box__row",attrs:{"data-key":"Подходит для подсчёта:"}},[t.marker.votes_cameras_main_true_count?[t._v("\n            да\n          ")]:t.marker.votes_cameras_main_true_count||t.marker.votes_cameras_main_null_count||!t.marker.votes_cameras_main_false_count?t.marker.votes_cameras_main_null_count?[t._v("\n            не выбрана камера\n          ")]:t._e():[t._v("\n            нет\n          ")]],2),t._v(" "),a("div",{staticClass:"in-marker-box__row",attrs:{"data-key":"Официальная явка:"}},[t._v("\n          "+t._s(t.marker.ballots_in_ballot_boxes_after_election?t.marker.ballots_in_ballot_boxes_after_election:"н/д")+"\n        ")]),t._v(" "),a("div",{staticClass:"in-marker-box__row",attrs:{"data-key":"Отклонение:"}},[t.marker.deviation&&t.marker.deviation_error&&t.marker.official_turnout_percent?[a("tip-overflow",{attrs:{text:t.computedTipDeviation}},[t._v(t._s(t.computedDeviation))])]:[t._v("н/д")]],2)]),t._v(" "),t.marker.votes_cameras_main_true_count?a("div",{staticClass:"in-marker-box"},[a("div",{staticClass:"in-marker-box__head"},[t._v("Ошибки")]),t._v(" "),a("div",{staticClass:"in-marker-box__row",attrs:{"data-key":"Участок исключен из анализа:"}},[t._v("\n          "+t._s(t.marker.cameras_count&&t.marker.blacklist_count?"да":"нет")+"\n        ")]),t._v(" "),a("div",{staticClass:"in-marker-box__row",attrs:{"data-key":"Причина:"}},[t.marker.blacklist_reason?[t._v("\n            "+t._s(t.marker.blacklist_reason)+"\n          ")]:t.marker.cameras_count?[t._v("\n            Ошибка Ревизора превышает заявленный показатель в\n            "+t._s(100*t.marker.constant_revisor_error)+"%\n          ")]:t._e()],2)]):t._e(),t._v(" "),t.marker.votes_cameras_main_true_count?a("div",{staticClass:"in-marker-box"},[a("div",{staticClass:"in-marker-box__head"},[t._v("Обработка")])]):t._e()]),t._v(" "),a("div",{staticClass:"in-marker__right"},[a("ul",{staticClass:"in-marker-image"},t._l(t.marker.images,(function(e,i){return a("li",{key:i,staticClass:"in-marker-image__item"},[a("div",{staticClass:"in-marker-image__head",class:{"in-marker-image__head--right":e.main}},[t._v("\n            Камера "+t._s(e.cam_numeric_id)+"\n          ")]),t._v(" "),a("img",{attrs:{src:e.raw_image,alt:""}})])})),0)])]),t._v(" "),t._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"in-marker__footer"},[e("button",{staticClass:"btn btn--primary"},[this._v("Детали")])])}],!1,null,null,null).exports},computed:{markers:function(){var t=this;return this.$store.getters["ViewCheck/getUiks"].map((function(e){var a,i;return Object.assign(e,{latlngs:[e.latitude,e.longitude],icon:t.drawIcon(e.violations_count?"red":"green",null!==(a=e.violations_count)&&void 0!==a?a:0),violations:null!==(i=e.violations_count)&&void 0!==i?i:0,violation_types:e.violation_types.reduce((function(t,e){var a=t.some((function(t){return 1===t.id}));return 1===e.id&&a||t.push(e),t}),[])})}))},markerClusters:function(){return{iconCreateFunction:function(t){var e=function t(e){var a=0;return e._childClusters.forEach((function(e){return a+=t(e)})),e._markers.length?(e._markers.forEach((function(t){t.options._violations&&(a+=parseInt(t.options._violations))})),parseInt(a)):a}(t),a=" marker-cluster-";return a+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster "+a,iconSize:new L.Point(40,40)})}}}},methods:{initMap:function(t){this.$store.commit("ViewCheck/setUikMap",t)},drawIcon:function(t,e){return new L.DivIcon({className:"asd",html:'<span class="leaflet-icon-mark leaflet-icon-mark--'.concat(t,'">').concat(e,"</span>")})}}},r=(a(19),{data:function(){return{data:{id:null,uiks:[],regions:[],votes:[],votesOfficial:[],votesPercent:[],boxTypes:[],processes:[],violationTypes:[],violationStatuses:[],others:[]},errors:[]}},props:{},mounted:function(){this.data.id=this.$store.getters["ViewCheck/getCheck"].check_id},methods:{reset:function(){this.data.regions=[]},confirm:function(){var t=this;this.validate()&&(this.$emit("loading",!0),this.$store.dispatch("ViewCheck/updateUiks",this.data).then((function(e){e.hasOwnProperty("errors")&&(t.errors=e.errors),t.$emit("loading",!1)})))},validate:function(){var t=this.data;t.regions,t.uiks,t.boxTypes;return!this.errors.length}},computed:{computedUiks:function(){return this.$store.getters["ViewCheck/getUikList"]},computedRegions:function(){return this.$store.getters["ViewCheck/getRegionList"]},computedBoxTypes:function(){return this.$store.getters["ViewCheck/getBoxTypeList"]},computedVotes:function(){return[{id:[0,100],name:"Менее 100"},{id:[100,250],name:"100 - 250"},{id:[250,500],name:"250 - 500"},{id:[500,1e3],name:"500 - 1 000"},{id:[1e3,1500],name:"1 000 - 1 500"},{id:[1500,2e3],name:"1 500 - 2 000"},{id:[2e3,999999],name:"2 000 и более"}]},computedVotesPercent:function(){return[{id:[0,5],name:"Менее 5%"},{id:[5,10],name:"5 - 10%"},{id:[10,15],name:"10 - 15%"},{id:[15,20],name:"15 - 20%"},{id:[20,30],name:"20 - 30%"},{id:[30,40],name:"30 - 40%"},{id:[40,50],name:"40 - 50%"},{id:[50,100],name:"50% и более"}]},computedProcesses:function(){return[{id:1,name:"В обработке",className:"filter-checkbox--processing"},{id:2,name:"В черном списке",className:"filter-checkbox--blacklist"},{id:3,name:"Исключен из анализа",className:"filter-checkbox--excluded"},{id:4,name:"Обработан не сначала",className:"filter-checkbox--not-first"},{id:5,name:"Была ошибка",className:"filter-checkbox--error"}]},computedViolationTypes:function(){return this.$store.getters["ViewCheck/getViolationTypeList"]},computedViolationStatuses:function(){return this.$store.getters["ViewCheck/getViolationStatusList"]},computedOthers:function(){return[{id:1,name:"Подходит для подсчета"},{id:2,name:"Не подходит для подсчета"},{id:3,name:"Не выбрана камера"},{id:4,name:"Посчитан вручную"}]}}}),o={data:function(){return{}},props:{},mounted:function(){},methods:{scrollToMap:function(t){document.querySelector(".uik").scrollIntoView({behavior:"smooth",block:"start"});var e=this.$store.getters["ViewCheck/getUikMap"];e.setZoom(15),setTimeout((function(){return e.panTo(t)}),500)}},computed:{computedTable:function(){var t={key:"#",region:"Регион",uik:"Участок",events:"Событие",address:"Адрес",actions:"Детали"},e=this.$store.getters["ViewCheck/getUiks"].map((function(t,e){return{key:t.uik_id,region:t.region_number,uik:t.uik_number,events:t.violation_types.reduce((function(t,e){var a=t.some((function(t){return 1===t.id}));return 1===e.id&&a||t.push(e),t}),[]),address:t.address,actions:t}}));return{data:e,options:{headings:t,_data:e,filterAlgorithm:{region:function(t,e){var a=t.actions.cameras.reduce((function(t,e){return t+e.cam_numeric_id}),""),i=t.actions.cameras.reduce((function(t,e){return t+e.cam_id}),""),s=t.actions.violation_types.reduce((function(t,e){return t+e.name}),"");return(t.actions.region+" "+t.actions.tik+" "+a+" "+i+" "+s).includes(e)}},sortByColumn:!0,sortable:["key"]},columns:Object.keys(t)}}}},c={computed:{computedWheelChart:function(){var t=this.$store.getters["ViewCheck/getCheck"],e=[],a=[];t.videos_processing_select_false_count&&(e.push(t.videos_processing_select_false_count),a.push("Выбор камеры")),t.videos_processing_box_false&&(e.push(t.videos_processing_box_false),a.push("Поиск ящиков")),t.videos_processing_counting_false_count&&(e.push(t.videos_processing_counting_false_count),a.push("Подсчёт явки")),t.real_counting_videos_count&&(e.push(t.real_counting_videos_count),a.push("Ручной подсчёт явки")),t.checking_videos_count&&(e.push(t.checking_videos_count),a.push("Проверка работы Ревизора")),t.videos_to_select_cam_count&&(e.push(t.videos_to_select_cam_count),a.push("В очереди на выбор камеры")),t.videos_to_find_boxes_count&&(e.push(t.videos_to_find_boxes_count),a.push("В очереди на поиск ящиков")),t.videos_to_count_count&&(e.push(t.videos_to_count_count),a.push("В очереди на подсчет явки")),t.videos_to_real_count_count&&(e.push(t.videos_to_real_count_count),a.push("В очереди на ручной подсчет явки")),t.videos_to_check_count&&(e.push(t.videos_to_check_count),a.push("В очереди на проверке Ревизора")),e.length||this.$emit("empty");return{chartdata:{labels:a,datasets:[{data:e}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1},display:!1,scaleLabel:{display:!0,labelString:""}}],xAxes:[{display:!1,scaleLabel:{display:!0,labelString:""}}]},legend:{display:!0}}}}}},l={components:{UikMap:Object(s.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"leaflet-map"},[e("leaflet-map",{attrs:{markers:this.markers,"marker-clusters":this.markerClusters,popup:!0},on:{init:this.initMap},scopedSlots:this._u([{key:"popup",fn:function(t){return[e("uik-map-marker",{attrs:{marker:t.marker}})]}}])})],1)}),[],!1,null,"341976d4",null).exports,UikFilter:Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"position-relative"},[a("div",{staticClass:"tab-screen__body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("v-filter",{attrs:{title:"Найти участок",type:"search",data:t.computedUiks},model:{value:t.data.uiks,callback:function(e){t.$set(t.data,"uiks",e)},expression:"data.uiks"}}),t._v(" "),a("v-filter",{attrs:{title:"Регионы",type:"search",data:t.computedRegions},model:{value:t.data.regions,callback:function(e){t.$set(t.data,"regions",e)},expression:"data.regions"}}),t._v(" "),a("v-filter",{attrs:{title:"Явка",type:"limit",data:t.computedVotes},model:{value:t.data.votes,callback:function(e){t.$set(t.data,"votes",e)},expression:"data.votes"}}),t._v(" "),a("v-filter",{attrs:{title:"Официальная явка",type:"limit",data:t.computedVotes},model:{value:t.data.votesOfficial,callback:function(e){t.$set(t.data,"votesOfficial",e)},expression:"data.votesOfficial"}}),t._v(" "),a("v-filter",{attrs:{title:"Отклонение",type:"limit",data:t.computedVotesPercent},model:{value:t.data.votesPercent,callback:function(e){t.$set(t.data,"votesPercent",e)},expression:"data.votesPercent"}}),t._v(" "),a("v-filter",{attrs:{title:"Тип ящика",data:t.computedBoxTypes},model:{value:t.data.boxTypes,callback:function(e){t.$set(t.data,"boxTypes",e)},expression:"data.boxTypes"}}),t._v(" "),a("v-filter",{attrs:{title:"Обработка",data:t.computedProcesses},model:{value:t.data.processes,callback:function(e){t.$set(t.data,"processes",e)},expression:"data.processes"}}),t._v(" "),a("v-filter",{attrs:{title:"События",data:t.computedViolationTypes},model:{value:t.data.violationTypes,callback:function(e){t.$set(t.data,"violationTypes",e)},expression:"data.violationTypes"}}),t._v(" "),a("v-filter",{attrs:{title:"Реакция на события",data:t.computedViolationStatuses},model:{value:t.data.violationStatuses,callback:function(e){t.$set(t.data,"violationStatuses",e)},expression:"data.violationStatuses"}}),t._v(" "),a("v-filter",{attrs:{title:"Другое",data:t.computedOthers},model:{value:t.data.others,callback:function(e){t.$set(t.data,"others",e)},expression:"data.others"}}),t._v(" "),a("div",{staticClass:"check__buttons"},[a("button",{staticClass:"btn btn--primary",on:{click:t.confirm}},[t._v("Применить")]),t._v(" "),a("button",{staticClass:"btn btn--secondary",on:{click:t.reset}},[t._v("Сбросить")])])],1)])])])}),[],!1,null,null,null).exports,UikTable:Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-client-table",{attrs:{data:t.computedTable.data,columns:t.computedTable.columns,options:t.computedTable.options},scopedSlots:t._u([{key:"events",fn:function(e){return[a("ul",{staticClass:"uik-type-list"},t._l(e.row.events,(function(t,e){return a("li",{key:e,staticClass:"uik-type-list__item"})})),0)]}},{key:"address",fn:function(e){return[a("tip-overflow",{key:e.row.address},[t._v(t._s(e.row.address))])]}},{key:"actions",fn:function(e){return[a("div",{staticClass:"vuecomputedTable__icons"},[a("a",{attrs:{href:"",title:"Информация об участке"},on:{click:function(t){t.preventDefault()}}},[a("unicon",{attrs:{name:"presentation-check",fill:"royalblue"}})],1),t._v(" "),a("a",{attrs:{href:"",title:"Найти на карте"},on:{click:function(a){return a.preventDefault(),t.scrollToMap(e.row.actions.latlngs)}}},[a("unicon",{attrs:{name:"map-marker",fill:"royalblue"}})],1)])]}}])})}),[],!1,null,null,null).exports,UikChart:Object(s.a)(c,(function(){var t=this.$createElement;return(this._self._c||t)("chart-wheel",{attrs:{"initial-data":this.computedWheelChart}})}),[],!1,null,null,null).exports},props:{},data:function(){return{uikChart:!0,isLoading:!1}},methods:{loading:function(t){this.isLoading=t}},computed:{computedTile:function(){var t=this.$store.getters["ViewCheck/getCheck"];return[{title:"Участки",text:"Количество загруженных участков в систему",value:t.uiks_count,class:""},{title:"Подходят",text:"Участки, на которых камера подходит для подсчета явки",value:t.uik_camera_count,class:"uik-tile__item--settings"},{title:"Не подходят",text:"Участки, на которых расположение ящиков не позволяет посчитать явку",value:t.uiks_count-t.uik_camera_count,class:"uik-tile__item--negative"},{title:"События",text:"Общее количество выявленных событий",value:t.violation_count,class:"uik-tile__item--event"},{title:"Голосов",text:"Количество распознанных системой действий как «голос»",value:"".concat(t.revisor_votes," ± ").concat(Math.round(t.revisor_votes*t.constant.revisor_error)),class:"uik-tile__item--voice"},{title:"Отклонение явки",text:"Отклонение данных Ревизора от официальных",value:"".concat(t.votes_deviation_count," ± ").concat(Math.round(t.votes_deviation_count*t.constant.revisor_error)),class:"uik-tile__item--offset"}]}}},u=Object(s.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uik"},[t.isLoading?a("preloader"):t._e(),t._v(" "),a("div",{staticClass:"uik__tile"},[a("ul",{staticClass:"uik-tile"},t._l(t.computedTile,(function(e,i){return a("li",{key:i,staticClass:"uik-tile__item",class:e.class},[a("div",{staticClass:"uik-tile__title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"uik-tile__text"},[t._v(t._s(e.text))]),t._v(" "),a("div",{staticClass:"uik-tile__value"},[t._v(t._s(e.value))])])})),0)]),t._v(" "),a("div",{staticClass:"uik__container"},[a("div",{staticClass:"uik__filter"},[a("uik-filter",{on:{loading:t.loading}})],1),t._v(" "),a("div",{staticClass:"uik__map"},[a("uik-map")],1)]),t._v(" "),a("div",{staticClass:"uik__container"},[a("div",{staticClass:"uik__table"},[a("div",{staticClass:"uik__title"},[t._v("Список участков")]),t._v(" "),a("uik-table")],1),t._v(" "),t.uikChart?a("div",{staticClass:"uik__chart"},[a("div",{staticClass:"uik__title"},[t._v("Обработка видео")]),t._v(" "),a("uik-chart",{on:{empty:function(e){t.uikChart=!1}}})],1):t._e()])],1)}),[],!1,null,null,null);e.default=u.exports}}]);
//# sourceMappingURL=3.chunk.js.map